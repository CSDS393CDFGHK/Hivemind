<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Hello World</title>
</head>
<body> 
    <script src="../shared/Message.js"></script>
    <script src="../shared/MessageType.js"></script>
    <script type="text/javascript">
        console.log("Hello World");

        // Let us open a web socket
        var ws = new WebSocket("ws://localhost:8000");

        ws.onopen = function() {
          // Web Socket is connected, send data using send()

          // Create lobby
          let m = new Message(-1, 0, MessageType.CREATE_LOBBY, "1");
          ws.send(m.toJSON());

          // Send a username
          m = new Message(-1, 0, MessageType.USERNAME, "1", {"username":"CoolGuy32"});
          ws.send(m.toJSON());
        };

        ws.onmessage = function (evt) {
          var msg = evt.data;
          console.log("Received: " + msg);
        };

        ws.onclose = function() {

          // websocket is closed.
          alert("Connection is closed...");
        };
    </script>
</body>
</html>